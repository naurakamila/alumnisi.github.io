!function(s,e){function a(){this.ajax={}}var r,u;e.album=(r=s,(u=e).npm.objectAssign(a.prototype,{edit_name:function(e,a,s){var i,t,o,n=r(s).closest(".ps-js-album-name"),c=n.find(".ps-js-album-name-text"),d=n.find(".ps-js-album-name-editor"),l=n.find(".ps-js-album-name-trigger");d.is(":visible")||(c.hide(),l.hide(),d.show(),t=d.find(".ps-js-submit"),(i=d.find("input")).data("original-value",o=i.val()),i.focus().val("").val(o),d.off("click input"),d.on("click",".ps-js-cancel",function(){i.val(o),d.off("click").hide(),c.show(),l.show()}),d.on("click",".ps-js-submit",r.proxy(function(s){this.save_name(e,a,i.val(),s.currentTarget)},this)),d.on("input","input",_.throttle(function(s){r.trim(s.target.value)?t.removeAttr("disabled"):t.attr("disabled","disabled")},500)),i.trigger("input"))},save_name:function(s,e,n,c){var d,l="save_name";this.ajax[l]||(this.ajax[l]=!0,n=r.trim(n),(d=r(c).find(".ps-js-loading")).show(),u.postJson("photosajax.set_album_name",{album_id:s,user_id:e,name:n,_wpnonce:psdata_photos_album.nonce_set_album_name},r.proxy(function(s){var e=r(c).closest(".ps-js-album-name"),a=e.find(".ps-js-album-name-text"),i=e.find(".ps-js-album-name-editor"),t=e.find(".ps-js-album-name-trigger"),o=i.find("input");this.ajax[l]=!1,d.hide(),s.success?(o.val(n),i.off("click").hide(),a.text(n).show(),t.show()):u.dialog(s.errors[0],{error:!0}).show().autohide()},this)))},edit_desc:function(e,a,i,s){var t,o,n=r(s).closest(".ps-js-album-desc"),c=n.find(".ps-js-album-desc-text"),d=n.find(".ps-js-album-desc-placeholder"),l=n.find(".ps-js-album-desc-editor");l.is(":visible")||(c.hide(),d.hide(),l.show(),(t=l.find("textarea")).data("original-value",o=t.val()),t.focus().val("").val(o),l.off("click"),l.on("click",".ps-js-cancel",function(){t.val(o),l.off("click").hide(),r.trim(o)?(c.show(),d.hide()):(c.hide(),d.show())}),l.on("click",".ps-js-submit",r.proxy(function(s){this.save_desc(e,a,i,t.val(),s.currentTarget)},this)))},save_desc:function(s,e,a,n,c){var d,l="save_desc";this.ajax[l]||(this.ajax[l]=!0,n=r.trim(n),(d=r(c).find(".ps-js-loading")).show(),u.postJson("photosajax.set_album_description",{album_id:s,user_id:e,owner_id:a,description:n,_wpnonce:psdata_photos_album.nonce_set_album_description},r.proxy(function(s){var e=r(c).closest(".ps-js-album-desc"),a=e.find(".ps-js-album-desc-text"),i=e.find(".ps-js-album-desc-placeholder"),t=e.find(".ps-js-album-desc-editor"),o=t.find("textarea");this.ajax[l]=!1,d.hide(),s.success?(o.val(n),t.off("click").hide(),n?(a.text(n).show(),i.hide()):(a.text(n).hide(),i.show())):u.dialog(s.errors[0],{error:!0}).show().autohide()},this)))},change_acc:function(s,e,a,i){u.postJson("photosajax.set_album_access",{album_id:s,user_id:e,acc:a,_wpnonce:psdata_photos_album.nonce_set_album_access},r.proxy(function(s){s.success||u.dialog(s.errors[0],{error:!0}).show().autohide()},this))}}),new a)}(jQuery,peepso);