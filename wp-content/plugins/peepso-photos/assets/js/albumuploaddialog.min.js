!function e(s,n,p){function d(t,o){if(!n[t]){if(!s[t]){var i="function"==typeof require&&require;if(!o&&i)return i(t,!0);if(h)return h(t,!0);throw(i=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",i}i=n[t]={exports:{}},s[t][0].call(i.exports,function(o){return d(s[t][1][o]||o)},i,i.exports,e,s,n,p)}return n[t].exports}for(var h="function"==typeof require&&require,o=0;o<p.length;o++)d(p[o]);return d}({1:[function(o,t,i){(function(e){(function(){"use strict";var o,t,s,n,p="undefined"!=typeof window?window.peepso:void 0!==e?e.peepso:null,d=window.psdata_photos_albumuploaddialog&&window.psdata_photos_albumuploaddialog.template;function i(o,t){this.create(o,t),this.popup.show()}o=jQuery,(t=peepso).PhotoAlbumUploadDialog=(s=o,(n=t).npm.objectAssign(i.prototype,n.npm.EventEmitter.prototype,{template:psdata_photos_albumuploaddialog.template,create:function(o,t){var i="ps-js-dialog-create-album",e=_.uniqueId(i+"-");this.user_id=o||peepsodata.userid,this.album_id=t,this.popup=(0,p.dialog)(d,{wide:!0}).show(),this.$el=this.popup.$el,this.$el.addClass(i).attr("id",e),this.$submit=this.$el.find(".ps-js-submit"),this.$loading=this.$el.find(".ps-js-loading"),this.$container=this.$el.find(".ps-js-photos-container"),this.$upload=this.$el.find(".ps-js-photos-upload"),this.$el.on("click",".ps-js-photos-upload-button",s.proxy(this.onUpload,this)),this.$el.on("click",".ps-js-cancel",s.proxy(this.onClose,this)),this.$el.on("click",".ps-js-submit",s.proxy(this.onSubmit,this)),this.$el.appendTo(document.body),this.dropzone=new n.PhotoDropzone(this.$el.find(".ps-js-photos-container")),this.dropzone.on("photo_added",s.proxy(this.onPhotoAdded,this)),this.dropzone.on("photo_upload_start",s.proxy(this.onPhotoUploadStart,this)),this.dropzone.on("photo_upload_done",s.proxy(this.onPhotoUploadDone,this)),this.dropzone.on("photo_empty",s.proxy(this.onPhotoEmpty,this))},onUpload:function(){this.dropzone.triggerUpload()},onPhotoAdded:function(){this.$upload.hide(),this.$container.show()},onPhotoUploadStart:function(){this.$submit.attr("disabled","disabled")},onPhotoUploadDone:function(o){o<=0&&this.$submit.removeAttr("disabled")},onPhotoEmpty:function(){this.$container.hide(),this.$upload.show()},onClose:function(o){o.preventDefault(),o.stopPropagation(),this.dropzone.destroy(),this.$el.remove()},onSubmit:function(){var o=this.dropzone.getPhotos(),t=!1;1<=o.length?this.$el.find(".ps-js-error-photo").hide():(this.$el.find(".ps-js-error-photo").show(),t=!0),t||(o={user_id:this.user_id,album_id:this.album_id,type:"photo",photo:o,_wpnonce:this.$el.find("[name=_wpnonce]").val(),_wp_http_referer:this.$el.find("[name=_wp_http_referer]").val()},o=n.observer.applyFilters("photos_add_photos_to_album_req",o),this.$submit.attr("disabled","disabled"),this.$loading.show(),n.postJson("photosajax.add_photos_to_album",o,s.proxy(function(o){this.$loading.hide(),this.$submit.removeAttr("disabled"),o.success&&(this.$el.remove(),window.location.reload())},this)))}}),i)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);