!function i(a,n,p){function h(t,e){if(!n[t]){if(!a[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=n[t]={exports:{}};a[t][0].call(r.exports,function(e){return h(a[t][1][e]||e)},r,r.exports,i,a,n,p)}return n[t].exports}for(var u="function"==typeof require&&require,e=0;e<p.length;e++)h(p[e]);return h}({1:[function(e,t,s){"use strict";e("./page-photos"),e("./page-albums")},{"./page-albums":2,"./page-photos":3}],2:[function(e,t,s){"use strict";function o(){o.super_.apply(this,arguments),i(i.proxy(this.init_page,this))}var r,i;r=jQuery,new(i=r,peepso.npm.inherits(o,PsPageAutoload),peepso.npm.objectAssign(o.prototype,{init_page:function(){},_search_url:"photosajax.get_list_albums",_search_params:{uid:peepsodata.currentuserid,user_id:peepsodata.userid,sort:"desc",limit:4,page:1},_search_render_html:function(e){return _.defer(i.proxy(function(){this._search_$ct.find(".ps-js-beforeloaded").toggleClass("ps-js-beforeloaded loaded")},this)),e.albums||""},_search_get_items:function(){return this._search_$ct.children(".ps-js-album")},_fetch:function(e){return i.Deferred(i.proxy(function(t){e=peepso.observer.applyFilters("photos_get_list_albums",e),e=i.extend({},e),_.isUndefined(e.limit)||(e.limit*=2),this._fetch_xhr&&this._fetch_xhr.abort(),this._fetch_xhr=peepso.getJson(this._search_url,e,i.proxy(function(e){e.success?t.resolveWith(this,[e.data]):t.rejectWith(this,[e.errors])},this))},this))}}),o)(".ps-js-albums")},{}],3:[function(e,t,s){(function(e){"use strict";var t,i=(t="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null)&&t.__esModule?t:{default:t},a="undefined"!=typeof window?window.peepso:void 0!==e?e.peepso:null;function s(){s.super_.apply(this,arguments),(0,i.default)(i.default.proxy(this.init_page,this))}(0,i.default)(function(){var t=["small","large"],s=(0,i.default)(".ps-js-photos-viewmode"),o=(0,i.default)(".ps-js-photos, .ps-js-albums");function r(e){e=0<=t.indexOf(e)?e:t[0],s.removeClass("ps-btn--active"),s.filter('[data-mode="'.concat(e,'"]')).addClass("ps-btn--active"),o.removeClass(t.map(function(e){return"ps-photos__list--".concat(e)}).join(" ")),o.addClass("ps-photos__list--".concat(e)),a.ls.set("photos_viewmode",e)}s.length&&o.length&&(r(a.ls.get("photos_viewmode")),s.on("click",function(e){e.preventDefault(),r((0,i.default)(this).data("mode"))}))}),(0,i.default)(function(){}),new(peepso.npm.inherits(s,PsPageAutoload),peepso.npm.objectAssign(s.prototype,{init_page:function(){var e=+peepsophotosdata.album_id;e&&(this._search_url="photosajax.get_user_photos_album",this._search_params.album_id=e),this._search_$sortby=(0,i.default)(".ps-js-photos-sortby").on("change",i.default.proxy(this._filter,this)),this._search_$sortby.length&&this._search_$sortby.trigger("change"),peepso.observer.addAction("peepso_delete_post",function(e){(0,i.default)(".ps-js-photo").filter('[data-post-id="'+e+'"]').remove()},10,1)},_search_url:"photosajax.get_user_photos",_search_params:{uid:peepsodata.currentuserid,user_id:peepsodata.userid,sort:"desc",limit:4,page:1},_search_render_html:function(e){return _.defer(i.default.proxy(function(){this._search_$ct.find(".ps-js-beforeloaded").toggleClass("ps-js-beforeloaded loaded")},this)),e.photos||""},_search_get_items:function(){return this._search_$ct.children(".ps-js-photo")},_fetch:function(e){return i.default.Deferred(i.default.proxy(function(t){e=peepso.observer.applyFilters("photos_get_list_photos",e),e=i.default.extend({},e),_.isUndefined(e.limit)||(e.limit*=2),this._fetch_xhr&&this._fetch_xhr.abort(),this._fetch_xhr=peepso.getJson(this._search_url,e,i.default.proxy(function(e){e.success?t.resolveWith(this,[e.data]):t.rejectWith(this,[e.errors])},this))},this))},_filter:function(){var e=this._search_$sortby.val();this._fetch_xhr&&this._fetch_xhr.abort(),this._search_params.sort=e,this._search_params.page=1,this._search()}}),s)(".ps-js-photos")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);